<%= content_for :javascript do %>
  <%= javascript_tag do %>
    function checkUsername() {
      var element = $(this);
      if(element.val() != "") {
        var url = "https://api.github.com/users/" + element.val();
        var req = $.ajax({
          url : url,
          dataType : "jsonp",
          success : function(response) {
            if(response.data.message == "Not Found" || response.data.type == "Organization") {
              element.parent("li").addClass("error");
              element.focus();
            } else {
              element.parent("li").removeClass("error");
            }
          }
        });
      } else {
        if(element.prop('required')) {
          element.parent("li").addClass("error");
          element.focus();
        }
      }
    }
    $("input.github_username").blur(checkUsername);
  <% end %>
<% end %>
