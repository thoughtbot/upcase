---
in:  This is an !image.jpg!
out: <p>This is an <img src="image.jpg" alt="" /></p>
---
in:  This is an !image.jpg(with alt text)!
out: <p>This is an <img src="image.jpg" title="with alt text" alt="with alt text" /></p>
---
in:  This is an !http://example.com/i/image.jpg!
out: <p>This is an <img src="http://example.com/i/image.jpg" alt="" /></p>
---
in:  This is an !http://example.com/i/image.jpg#a1!
out: <p>This is an <img src="http://example.com/i/image.jpg#a1" alt="" /></p>
---
in:  This is an !image.jpg!.
out: <p>This is an <img src="image.jpg" alt="" />.</p>
---
in:  This is an !image.jpg(with alt text)!.
out: <p>This is an <img src="image.jpg" title="with alt text" alt="with alt text" />.</p>
---
in:  This is an !http://example.com/i/image.jpg!.
out: <p>This is an <img src="http://example.com/i/image.jpg" alt="" />.</p>
---
in:  This is an !http://example.com/i/image.jpg#a1!.
out: <p>This is an <img src="http://example.com/i/image.jpg#a1" alt="" />.</p>
---
in:  This is not an image!!!
out: <p>This is not an image!!!</p>
---
in:  This is an !http://example.com/i/image.jpg!:#1
out: <p>This is an <a href="#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:#a
out: <p>This is an <a href="#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:#a1
out: <p>This is an <a href="#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:#a10
out: <p>This is an <a href="#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html
out: <p>This is an <a href="index.html"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html#1
out: <p>This is an <a href="index.html#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html#a1
out: <p>This is an <a href="index.html#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html#a10
out: <p>This is an <a href="index.html#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html?foo=bar
out: <p>This is an <a href="index.html?foo=bar"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html?foo=bar#1
out: <p>This is an <a href="index.html?foo=bar#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html?foo=bar#a
out: <p>This is an <a href="index.html?foo=bar#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html?foo=bar#a1
out: <p>This is an <a href="index.html?foo=bar#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:index.html?foo=bar#a10
out: <p>This is an <a href="index.html?foo=bar#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/
out: <p>This is an <a href="http://example.com/"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/#1
out: <p>This is an <a href="http://example.com/#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/#a
out: <p>This is an <a href="http://example.com/#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/#a1
out: <p>This is an <a href="http://example.com/#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/#a10
out: <p>This is an <a href="http://example.com/#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html
out: <p>This is an <a href="http://example.com/index.html"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html#1
out: <p>This is an <a href="http://example.com/index.html#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html#a
out: <p>This is an <a href="http://example.com/index.html#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html#a1
out: <p>This is an <a href="http://example.com/index.html#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html#a10
out: <p>This is an <a href="http://example.com/index.html#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar
out: <p>This is an <a href="http://example.com/index.html?foo=bar"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar#1
out: <p>This is an <a href="http://example.com/index.html?foo=bar#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar#a
out: <p>This is an <a href="http://example.com/index.html?foo=bar#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar#a1
out: <p>This is an <a href="http://example.com/index.html?foo=bar#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar#a10
out: <p>This is an <a href="http://example.com/index.html?foo=bar#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#1
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a1
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a1"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a10
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a10"><img src="http://example.com/i/image.jpg" alt="" /></a></p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b"><img src="http://example.com/i/image.jpg" alt="" /></a>.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#1.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#1"><img src="http://example.com/i/image.jpg" alt="" /></a>.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a"><img src="http://example.com/i/image.jpg" alt="" /></a>.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a1.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a1"><img src="http://example.com/i/image.jpg" alt="" /></a>.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a10.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a10"><img src="http://example.com/i/image.jpg" alt="" /></a>.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b, but this is not.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b"><img src="http://example.com/i/image.jpg" alt="" /></a>, but this is not.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#1, but this is not.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#1"><img src="http://example.com/i/image.jpg" alt="" /></a>, but this is not.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a, but this is not.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a"><img src="http://example.com/i/image.jpg" alt="" /></a>, but this is not.</p>
---
in:  This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a1, but this is not.
out: <p>This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a1"><img src="http://example.com/i/image.jpg" alt="" /></a>, but this is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a10)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a10"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#1)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#1"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a1)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a1"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
---
in:  (This is an !http://example.com/i/image.jpg!:http://example.com/index.html?foo=bar&a=b#a10)  This is not.
out: <p>(This is an <a href="http://example.com/index.html?foo=bar&#38;a=b#a10"><img src="http://example.com/i/image.jpg" alt="" /></a>)  This is not.</p>
